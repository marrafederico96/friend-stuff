@page "/Group/{GroupName}"


@using FriendStuff.Features.Auth.DTOs
@using FriendStuff.Features.Group.DTOs
@using FriendStuff.Components.Shared

@if (!string.IsNullOrEmpty(GroupName) && _group != null)
{
    <section class="section">
    <h2 style="font-size: 2.2rem">@_group.GroupName</h2>
    <GroupComponent GroupName="@GroupName" UserInfo="@UserInfo"/>
    </section>
}


@code {
    [Parameter] public string? GroupName { get; set; }

    [CascadingParameter(Name = "UserInfo")]
    public UserInfoDto? UserInfo { get; set; }

    private GroupDto? _group;

    protected override void OnParametersSet()
    {
        if (UserInfo == null) return;
        _group = UserInfo.UserGroups
            .FirstOrDefault(g => g.NormalizeGroupName.Equals(GroupName));
    }

}